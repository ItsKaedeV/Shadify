{"version":3,"file":"WebShaderWallpaper.js","mappings":"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","sources":["webpack://WebShaderWallpaper/./src/WebShaderWallpaper.ts","webpack://WebShaderWallpaper/./src/index.ts","webpack://WebShaderWallpaper/webpack/bootstrap","webpack://WebShaderWallpaper/webpack/startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebShaderWallpaper = void 0;\nvar WebShaderWallpaper;\n(function (WebShaderWallpaper) {\n    ;\n    var DefaultConfig = {\n        allowMouse: true,\n        resolution: 2,\n        speedFactor: 1,\n        target: null,\n        fullscreen: true,\n        autoUpdate: true,\n    };\n    var vertShader = \"\\n      attribute vec2 coords;\\n      void main(void) {\\n          gl_Position = vec4(coords.xy, 0.0, 1.0);\\n      }\\n  \";\n    function createShader(gl, sourceCode, type) {\n        var shader = gl.createShader(type);\n        gl.shaderSource(shader, sourceCode);\n        gl.compileShader(shader);\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n            var info = gl.getShaderInfoLog(shader);\n            throw \"Could not compile WebGL program. \\n\\n\".concat(info);\n        }\n        return shader;\n    }\n    var Wallpaper = /** @class */ (function () {\n        function Wallpaper(fragShader, config) {\n            var _this = this;\n            if (config === void 0) { config = DefaultConfig; }\n            var _a, _b, _c, _d, _e, _f;\n            var _g, _h, _j, _k, _l, _m;\n            this.running = true;\n            this.eventHandlerResize = this.resize.bind(this);\n            this.eventHandlerMouse = this.mouse.bind(this);\n            this.config = config;\n            (_a = (_g = this.config).allowMouse) !== null && _a !== void 0 ? _a : (_g.allowMouse = DefaultConfig.allowMouse);\n            (_b = (_h = this.config).autoUpdate) !== null && _b !== void 0 ? _b : (_h.autoUpdate = DefaultConfig.autoUpdate);\n            (_c = (_j = this.config).fullscreen) !== null && _c !== void 0 ? _c : (_j.fullscreen = DefaultConfig.fullscreen);\n            (_d = (_k = this.config).speedFactor) !== null && _d !== void 0 ? _d : (_k.speedFactor = DefaultConfig.speedFactor);\n            (_e = (_l = this.config).target) !== null && _e !== void 0 ? _e : (_l.target = DefaultConfig.target);\n            (_f = (_m = this.config).resolution) !== null && _f !== void 0 ? _f : (_m.resolution = DefaultConfig.resolution);\n            // Get gl context from canvas\n            if (config === null || config === void 0 ? void 0 : config.target) {\n                if (this.canvas.tagName !== \"canvas\") {\n                    throw new Error(\"Target canvas is not a canvas element\");\n                }\n                this.canvas = config.target;\n            }\n            else {\n                this.canvas = document.createElement(\"canvas\");\n                document.body.appendChild(this.canvas);\n            }\n            if (this.config.fullscreen) {\n                this.canvas.style.position = \"fixed\";\n                this.canvas.style.left = \"0%\";\n                this.canvas.style.right = \"0%\";\n                this.canvas.style.top = \"0%\";\n                this.canvas.style.bottom = \"0%\";\n                this.canvas.style.width = \"100%\";\n                this.canvas.style.height = \"100%\";\n                this.canvas.style.zIndex = \"-1\";\n            }\n            this.resize();\n            this.gl = (this.canvas.getContext(\"webgl\") || this.canvas.getContext(\"experimental-webgl\"));\n            // Create shader program\n            this.pid = this.gl.createProgram();\n            // Compile vertex shader\n            this.vert = createShader(this.gl, vertShader, this.gl.VERTEX_SHADER);\n            this.gl.attachShader(this.pid, this.vert);\n            // Compile fragment shader\n            this.frag = createShader(this.gl, fragShader, this.gl.FRAGMENT_SHADER);\n            this.gl.attachShader(this.pid, this.frag);\n            this.gl.linkProgram(this.pid);\n            this.gl.useProgram(this.pid);\n            // Create buffer\n            var array = new Float32Array([-1, 3, -1, -1, 3, -1]);\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.gl.createBuffer());\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, array, this.gl.STATIC_DRAW);\n            var al = this.gl.getAttribLocation(this.pid, \"coords\");\n            this.gl.vertexAttribPointer(al, 2, this.gl.FLOAT, false, 0, 0);\n            this.gl.enableVertexAttribArray(al);\n            // Read uniforms\n            this.uniformResolution = this.gl.getUniformLocation(this.pid, \"resolution\");\n            this.uniformTime = this.gl.getUniformLocation(this.pid, \"time\");\n            this.uniformMouse = this.gl.getUniformLocation(this.pid, \"mouse\");\n            window.addEventListener(\"resize\", this.eventHandlerResize);\n            window.addEventListener(\"mousemove\", this.eventHandlerMouse);\n            var refresh = function () {\n                _this.update();\n                if (_this.running)\n                    requestAnimationFrame(refresh);\n            };\n            if (this.config.autoUpdate) {\n                refresh();\n            }\n        }\n        Wallpaper.prototype.resize = function () {\n            if (this.config.fullscreen) {\n                this.canvas.width = window.innerWidth / this.config.resolution;\n                this.canvas.height = window.innerHeight / this.config.resolution;\n            }\n        };\n        Wallpaper.prototype.mouse = function (e) {\n            if (!this.config.allowMouse) {\n                this.mouseX = window.innerWidth / 2;\n                this.mouseY = window.innerHeight / 2;\n                return;\n            }\n            this.mouseX = e.clientX;\n            this.mouseY = e.clientY;\n        };\n        Wallpaper.prototype.update = function () {\n            var _a = this.canvas, width = _a.width, height = _a.height;\n            this.gl.uniform2f(this.uniformMouse, this.mouseX / width / this.config.resolution, 1 - this.mouseY / height / this.config.resolution);\n            this.gl.uniform2f(this.uniformResolution, width, height);\n            this.gl.uniform1f(this.uniformTime, performance.now() / 1000 * this.config.speedFactor);\n            this.gl.viewport(0, 0, width, height);\n            this.gl.clearColor(0, 0, 0, 0);\n            this.gl.drawArrays(this.gl.TRIANGLES, 0, 3);\n        };\n        Wallpaper.prototype.destroy = function () {\n            this.gl.deleteProgram(this.pid);\n            this.gl.deleteShader(this.vert);\n            this.gl.deleteShader(this.frag);\n            this.running = false;\n            window.removeEventListener(\"resize\", this.eventHandlerResize);\n            window.removeEventListener(\"mousemove\", this.eventHandlerMouse);\n        };\n        return Wallpaper;\n    }());\n    WebShaderWallpaper.Wallpaper = Wallpaper;\n})(WebShaderWallpaper || (exports.WebShaderWallpaper = WebShaderWallpaper = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WebShaderWallpaper_1 = require(\"./WebShaderWallpaper\");\nexports.default = WebShaderWallpaper_1.WebShaderWallpaper;\nObject.assign(module.exports, WebShaderWallpaper_1.WebShaderWallpaper);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(607);\n"],"names":["WebShaderWallpaper","Object","defineProperty","exports","value","DefaultConfig","allowMouse","resolution","speedFactor","target","fullscreen","autoUpdate","createShader","gl","sourceCode","type","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","info","getShaderInfoLog","concat","Wallpaper","fragShader","config","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_this","this","running","eventHandlerResize","resize","bind","eventHandlerMouse","mouse","canvas","tagName","Error","document","createElement","body","appendChild","style","position","left","right","top","bottom","width","height","zIndex","getContext","pid","createProgram","vert","VERTEX_SHADER","attachShader","frag","FRAGMENT_SHADER","linkProgram","useProgram","array","Float32Array","bindBuffer","ARRAY_BUFFER","createBuffer","bufferData","STATIC_DRAW","al","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","uniformResolution","getUniformLocation","uniformTime","uniformMouse","window","addEventListener","refresh","update","requestAnimationFrame","prototype","innerWidth","innerHeight","e","mouseX","mouseY","clientX","clientY","uniform2f","uniform1f","performance","now","viewport","clearColor","drawArrays","TRIANGLES","destroy","deleteProgram","deleteShader","removeEventListener","WebShaderWallpaper_1","assign","module","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__"],"sourceRoot":""}